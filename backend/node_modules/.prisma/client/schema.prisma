generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Vehicle {
  id            String @id @default(uuid())
  model         String
  license_plate String @unique
  max_load      Float
  odometer      Float  @default(0)
  status        String @default("Available") // "Available", "In Shop", "On Trip"

  trips       Trip[]
  maintenance MaintenanceLog[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Driver {
  id             String @id @default(uuid())
  name           String
  license_status String @default("Active") // "Active", "Expired"
  safety_score   Float  @default(100)
  duty_status    String @default("Available") // "Available", "On Duty"

  trips Trip[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Trip {
  id           String @id @default(uuid())
  vehicle_id   String
  driver_id    String
  cargo_weight Float
  status       String @default("Pending") // "Pending", "Started", "Completed"

  vehicle Vehicle @relation(fields: [vehicle_id], references: [id])
  driver  Driver  @relation(fields: [driver_id], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MaintenanceLog {
  id          String @id @default(uuid())
  vehicle_id  String
  description String
  status      String @default("Pending") // "Pending", "Completed"

  vehicle Vehicle @relation(fields: [vehicle_id], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
